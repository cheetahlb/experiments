include ../includes/Makefile.includes

test:
	${NPF_PATH}/npf-compare.py "local+hash:Hash Click" "local+hash,crc:Hash DPDK" "local+hash,rss:Hash RSS" "local+cheetah,LB_MODE=rr:Cheetah - RR" --testie ${TESTIE_PATH} --cluster ${NPF_CLUSTER} --variables VERBOSE=0 PRINT=0 WORKSPACE=${CHEETAH_PATH} --tags stateless --use-last --output --variables "GEN_CONCURRENT=1024" "NSERVER={16,32,64}" --config n_runs=${N_RUNS} --tags rate --variables "SERVER_RATE=100" --show-full --show-cmd --show-files --use-last --variables CPU=4 "NETPERNODE=16" --graph-filename ${EXPE_PATH}/imbalance-uniform/imbalance_server/.pdf --tags wait --variables "WAIT=7000" FSIZE=8 --output-columns x all --graph-size 5 3 --config "graph_type={LAT999:boxplot,LAT99:boxplot,CPUVARS:boxplot}" "graph_color={2,2,2,5}" --tags server_rate ${NPF_FLAGS}

test_lat:
	${NPF_PATH}/npf-compare.py "local+hash:Hash Click" "local+hash,crc:Hash DPDK" "local+hash,rss:Hash RSS" "local+cheetah,LB_MODE=rr:Cheetah - RR" --testie ${TESTIE_PATH} --cluster ${NPF_CLUSTER} --variables VERBOSE=0 PRINT=0 WORKSPACE=${CHEETAH_PATH} --tags stateless --use-last --output --variables "GEN_CONCURRENT=1024" "NSERVER=64" --config n_runs=${N_RUNS} --tags rate --variables "SERVER_RATE=100" --show-full --show-cmd  --use-last --variables "NETPERNODE=16" --graph-filename ${EXPE_PATH}/imbalance-uniform/imbalance/.pdf --tags wait --variables WAIT=7000 "SERVER_RATE=[100-200#20]" FSIZE=8 CPUPOWER_PATH=${CPUPOWER_PATH} --config "var_format+={REQUEST:%.1fK}" --output-columns x all --graph-size 5 3 --config "graph_type={LAT999:boxplot,LAT99:boxplot,CPUVARS:boxplot}" "graph_color={2,2,2,5}" "var_grid+={CPUVARS}" "graph_show_fliers=0" "var_ticks+={LAT99:0+200+400+600+800+1000}" var_log={} var_lim+={result-LAT99:0-1000} --tags latcross server_rate --config 'var_log_base+={LAT99:2}' 'var_lim+={result-LAT99:20-2000}' var_ticks+={result-LAT99:25+50+100+200+400+800+1600} ${NPF_FLAGS}
