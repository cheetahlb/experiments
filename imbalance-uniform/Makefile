include ../includes/Makefile.includes

test:
	${NPF_PATH}/npf-compare.py "local+cheetah,LB_MODE=rr:Cheetah - RR" "local+hash:Hash Click" "local+hash,crc:Hash DPDK" "local+hash,rss:Hash RSS" --testie ${TESTIE_PATH} --cluster ${NPF_CLUSTER} --variables VERBOSE=0 PRINT=0 WORKSPACE=${CHEETAH_PATH} --tags stateless --use-last --output --variables "GEN_CONCURRENT=1024" "NSERVER={16,32,64}" --config n_runs=${N_RUNS} --tags rate --variables "SERVER_RATE=100" --show-full --show-cmd --show-files --use-last --variables CPU=4 "NETPERNODE=16" --graph-filename ${EXPE_PATH}/imbalance-uniform/imbalance_server/.pdf --tags wait --variables "WAIT=4000" FSIZE=8 --output-columns x all --graph-size 5 3 --config "graph_type={LAT999:boxplot,LAT99:boxplot,CPUVARS:boxplot}" --tags server_rate ${NPF_FLAGS}

test_lat:
	${NPF_PATH}/npf-compare.py "local+cheetah,LB_MODE=rr:Cheetah - RR" "local+hash:Hash Click" "local+hash,crc:Hash DPDK" "local+hash,rss:Hash RSS" --testie ${TESTIE_PATH} --cluster ${NPF_CLUSTER} --variables VERBOSE=0 PRINT=0 WORKSPACE=${CHEETAH_PATH} --tags stateless --use-last --output --variables "GEN_CONCURRENT=1024" "NSERVER=48" --config n_runs=10 --tags rate --variables "GEN_RATE=4800" --show-full --show-cmd --show-files --use-last --variables CPU=4 "NETPERNODE=16" --graph-filename ${EXPE_PATH}/imbalance-uniform/imbalance/.pdf --tags wait --variables "WAIT=[2000-6000#1000]" FSIZE=8 GEN_TIME=10 --config "var_format+={REQUEST:%.1fK}" --output-columns x all --graph-size 5 3 --config "graph_type={LAT999:boxplot,LAT99:boxplot,CPUVARS:boxplot}" "var_grid+={CPUVARS}" "graph_show_fliers=0" --tags latcross
